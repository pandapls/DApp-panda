import{produce as t}from"immer";import{atom as o}from"jotai/vanilla";import{useSetAtom as n,useAtomValue as r}from"jotai/react";import{useCallback as e}from"react";function i(n){const r=o(n,(o,n,e)=>n(r,t(o(r),"function"==typeof e?e:()=>e)));return r}const f=new WeakMap;function c(n){return r=()=>o(t=>t(n),(o,r,e)=>r(n,t(o(n),"function"==typeof e?e:()=>e))),(f.has(e=n)?f:f.set(e,r())).get(e);var r,e}function a(o,r){const i=n(o,r);return e(o=>i(t(o)),[i])}function m(t,o){return[r(t,o),a(t,o)]}export{i as atomWithImmer,m as useImmerAtom,a as useSetImmerAtom,c as withImmer};
//# sourceMappingURL=index.modern.mjs.map
